<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dockerized Microservices App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Dockerized Microservices Application</h1>
        <button onclick="loadUsers()">Load Users</button>

        <div class="content">
            <div class="users-section">
                <h2>Users List</h2>
                <ul id="users"></ul>
            </div>

            <div class="info-section">
                <h2>App Info</h2>
                <p>This is a simple Dockerized microservices application.</p>
                <p>Click "Load Users" to fetch user data from the backend.</p>
            </div>
        </div>

        <div id="error"></div>
    </div>

    <script>
        async function loadUsers() {
            const usersList = document.getElementById("users");
            const errorDiv = document.getElementById("error");
            usersList.innerHTML = "";
            errorDiv.textContent = "";

            try {
                const response = await fetch("http://localhost:8000/users");
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);

                const data = await response.json();
                if (data.users && data.users.length > 0) {
                    data.users.forEach(user => {
                        const li = document.createElement("li");
                        li.textContent = `${user[1]} (ID: ${user[0]})`;
                        usersList.appendChild(li);
                    });
                } else {
                    usersList.innerHTML = "<li>No users found</li>";
                }

            } catch (error) {
                console.error("Error fetching users:", error);
                errorDiv.textContent = "Failed to load users. Check backend or network!";
            }
        }
    </script>
</body>
</html>
